# 三. 面向对象编程

## 3.1 面向对象程序设计概述

面向对象程序设计(简称 **OOP** )是当今主流的程序设计范式.它已经取代了 20 世纪 70 年代的"结构化"过程化程序设计开发技术. Java 是完全面向对象的,必须熟悉 OOP 才能够编写 Java 程序.

面向对象的程序是由对象组成的,每个对象包含对象包含对用户公开的特定功能部分和隐藏的实现部分.程序中的很多对象来自标准库,还有一些是自定义的.

![image-20220507214935057](asset/chapter2/image/image-20220507214935057.png)



### 3.1.1 类

**类 (class)** 是构造独享的模板或蓝图.我们可以将类想象成制作小甜饼的切割机,将对象想象成小甜饼.由类**构造 (construct)**对象的过程称为创建类的**实例 (instance)**.

**封装 (encapsulation,有时候称为数据隐藏)**是与对象有关的一个重要概念.从形式上看,封装不过是将数据和行为组合在一个包中,并对对象的使用者隐藏了数据的实现方式.对象中的数据称为**实例域 (instance field)**,操作数据的过程称为**方法 (method)**.对于每个特定的类实例都有一组特定的实例域值.这些值的集合就是这个对象的当前**状态 (state)**.无论何时,只要向对象发送一个消息,它的状态就有可能发生改变.

实现封装的关键就在于**绝对不能**让类中的方法直接地访问其他类的实例域.程序**仅通过**对象的方法与对象数据进行交互.封装给对象赋予了"黑盒"的特征.



### 3.1.2 对象

**OOP** 的主要特性:

- **对象的行为 (behavior)** -- 可以对对象施加哪些操作,或可以对对象施加哪些方法?
- **对象的状态 (state)** -- 当施加那些方法时,对象如何响应?
- **对象标识 (identity)** -- 如何辨别具有相同行为与状态的不同对象?



### 3.1.3 类之间的关系

在类之间,最常见的关系有:

- **依赖 (uses-a)**
- **聚合 (has-a)**
- **继承 (is-a)**

**依赖 (dependence)**,即 "uses-a" 关系,是一种最明显,最常见的关系.例如, Order 类使用 Account 类是因为 Order 独享需要访问 Account 对象查看信用状态,但是 Item 类不依赖于 Account 类,这是因为 Item 对象与客户账户无关,因此,如果一个类的方法操作另一个类的对象,我们就说一个类**依赖于**另一个类.

应该尽可能地将相互依赖的类减至最少.

**聚合 (aggregation)**,即 "has-a" 关系,是一种具体且易于理解的关系.例如,一个 Order 对象包含一些 Item 对象.聚合关系就意味着类 A 的对象包含类 B 的对象,**简单来说就是仅仅是拥有,但是不使用**.

**继承 (inheritance)**,即 "is-a" 关系,是一种用于表示特殊与一般关系的.例如, RushOrder 类由 Order 类继承而来.在具有特殊性的 RushOrder 类中包含了一些优先处理的特殊方法,以及一个计算运费的不同方法.而其他的方法,如添加商品,生成账单等都是从 Order 类继承来的.一般而言,如果类 A 扩展类 B,类 A 不但包含从类 B 继承的方法,还会拥有一些额外的功能.



## 3.2 使用预定义类

在 Java 中,没有类就无法做任何事情,然而,并不是所有的类都具有面向对象特征.例如, Math 类,在程序中,可以使用 Math 类的方法,如 Math.random(),并只需要知道方法名和参数,而不必了解它的具体实现过程.这正是封装的关键所在.

### 3.2.1 对象与对象变量

想要使用对象,就必须先构造对象,并指定其初始状态.然后,对对象应用方法.

在 Java 程序设计语言中,使用**构造器 (constructor)**构造新实例.构造器是一种特殊的方法,用来构造并初始化对象.比如说,使用 Date 类创建对象.

​		`Date birthday = new Date();`

**对象**和**对象变量**之间存在一个很重要的区别,那就是定义的 birthday 不是一个对象,只是一个对象变量.对象和对象变量的关系如下图:

![image-20220507222318419](asset/chapter2/image/image-20220507222318419.png)

再比如说,声明 deadline 对象变量,这仅仅是声明,并没有赋值,调用 Date 类的 API 会产生空指针异常:

```java
Date deadline;
deadline.getTime();  // ooops,NullPointerException
```

可以让 deadline 和 birthday 引用同一个对象:

​		`deadline = birthday;`

这两个对象变量关系如图:

![image-20220507222736001](asset/chapter2/image/image-20220507222736001.png)

这两个对象向变量引用了同一个对象.

一定要认识到:**一个对象变量并没有实际包含一个对象,而仅仅是引用一个对象.**

